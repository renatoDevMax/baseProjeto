"use client";
import { useEffect, useState } from "react";

export default function SectionIntro() {
  const [widthPx, setWidthPx] = useState(150);
  const [rotationDeg, setRotationDeg] = useState(0);
  const [scrollProgress, setScrollProgress] = useState(0);

  useEffect(() => {
    let ticking = false;

    const update = () => {
      const maxScroll = 400;
      const scrollY = typeof window !== "undefined" ? window.scrollY : 0;
      const viewportWidth =
        typeof window !== "undefined" ? window.innerWidth : 150;
      const progressRaw = scrollY / maxScroll;
      const progress = Math.min(1, Math.max(0, progressRaw));
      const targetWidth = 150 + (viewportWidth - 150) * progress;
      setWidthPx(targetWidth);
      setRotationDeg(360 * progress);
      setScrollProgress(progress);
    };

    const onScroll = () => {
      if (!ticking) {
        ticking = true;
        requestAnimationFrame(() => {
          update();
          ticking = false;
        });
      }
    };

    update();
    window.addEventListener("scroll", onScroll, { passive: true });
    window.addEventListener("resize", update);
    return () => {
      window.removeEventListener("scroll", onScroll);
      window.removeEventListener("resize", update);
    };
  }, []);
  return (
    <div className="w-[100dvw] h-[100dvh] flex justify-center items-center relative">
      <video
        src="/intro2.mp4"
        autoPlay
        muted
        loop
        className="w-[100dvw] h-[100dvh] object-cover"
      />
      <div className="absolute top-0 left-0 w-[100dvw] h-[100dvh] bg-white/70"></div>

      <div
        className="absolute top-0 left-0 w-[100dvw] h-[100dvh] flex justify-center items-center gradienteBackground"
        style={{
          background: `radial-gradient(circle, #ffffff ${
            30 + 70 * scrollProgress
          }%, #ffffff00 ${100 + 70 * scrollProgress}%)`,
        }}
      >
        <div className="relative w-[150px] h-[150px] flex justify-center items-center">
          <div
            className="absolute left-[-25px] top-1/2 -translate-y-1/2 h-[150px] flex items-center gradienteLogo rounded-[75px]"
            style={{ width: widthPx }}
          >
            <div
              className="absolute w-[130px] h-[130px] rounded-[75px] flex justify-center items-center right-0"
              style={{ transform: `rotate(${rotationDeg / 2}deg)` }}
            >
              <svg
                width="100"
                height="100"
                viewBox="0 0 170 167"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M33.4754 1.06995C26.3745 4.55466 23.4815 12.5103 26.7032 19.6112C27.9525 22.3727 38.2751 33.6816 57.3424 53.2748C62.0763 58.1403 66.6788 62.94 67.5335 63.9262C71.4785 68.3972 79.2369 69.7779 84.6283 67.0164C87.7843 65.4385 104.419 50.0531 103.893 49.2641C103.696 48.9354 102.578 48.6724 101.329 48.6724C98.6987 48.6724 94.0962 46.7657 90.1513 44.07C88.5733 42.9522 78.7766 33.2871 68.454 22.5042C57.3424 10.9323 48.532 2.38494 46.954 1.46445C43.6665 -0.310775 36.7629 -0.508027 33.4754 1.06995Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-0 path-green"
                  pathLength="1"
                />
                <path
                  d="M96.2659 8.89407C90.5458 10.7351 85.2201 17.9017 85.2201 23.8191C85.2201 29.2106 89.691 35.917 94.7537 38.2182C97.9754 39.7305 104.09 39.862 107.246 38.547C110.468 37.1662 115.07 32.235 115.991 29.0791C117.043 25.6601 116.977 20.8604 115.925 18.2305C112.703 10.6693 103.893 6.46135 96.2659 8.89407Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-1 path-green"
                  pathLength="1"
                />
                <path
                  d="M149.852 27.4354C148.076 28.0271 143.737 31.2488 138.017 36.3115C133.02 40.651 123.618 48.8039 117.108 54.4583C103.038 66.6877 101.263 68.4629 100.014 71.4874C98.7644 74.5118 98.7644 80.4293 100.014 83.125C101.526 86.281 114.676 101.601 115.859 101.601C116.517 101.601 117.371 100.286 118.16 97.9843C120.001 92.7244 123.289 88.1877 128.746 83.3222C135.518 77.2733 150.706 63.9262 159.056 56.628C168.787 48.1464 170.76 43.8069 168.459 35.9828C166.157 28.0929 158.202 24.4109 149.852 27.4354Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-2 path-blue"
                  pathLength="1"
                />
                <path
                  d="M19.2078 49.0011C17.8271 49.4614 15.4601 51.0393 14.0794 52.4201C7.50446 58.732 7.24147 67.8711 13.4876 74.5118C19.4708 80.9552 30.6482 80.8237 36.2369 74.1831C42.0886 67.2136 41.8913 59.258 35.6451 52.8803C30.9769 48.1464 25.3883 46.7656 19.2078 49.0011Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-3 path-blue"
                  pathLength="1"
                />
                <path
                  d="M50.0442 62.6112C49.9127 63.0714 49.4525 64.7809 49.058 66.3589C47.2827 73.1311 44.6528 76.1555 19.4708 99.5623C10.5947 107.781 2.63902 115.802 1.71853 117.249C-0.516947 120.997 -0.582697 127.9 1.58703 131.977C4.47999 137.434 10.6604 140.261 16.7094 138.815C21.0488 137.763 21.772 137.237 35.0534 124.941C60.9586 100.943 66.2843 95.7488 67.4678 93.3161C69.1115 90.1601 69.243 83.6509 67.7308 80.6922C66.4815 78.3253 65.035 76.6158 57.0136 67.8711C53.9234 64.5837 51.162 61.8222 50.899 61.8222C50.5702 61.8222 50.1757 62.2167 50.0442 62.6112Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-4 path-blue"
                  pathLength="1"
                />
                <path
                  d="M138.477 86.0837C129.864 88.9109 124.998 97.3268 127.3 105.48C129.601 113.83 140.318 119.287 148.011 116.131C153.534 113.83 158.202 107.255 158.202 101.798C158.202 95.9461 154.651 90.0287 149.523 87.3987C146.564 85.8865 141.041 85.229 138.477 86.0837Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-5 path-blue"
                  pathLength="1"
                />
                <path
                  d="M81.8668 94.9598C80.5519 95.4201 75.3577 98.9705 70.2292 102.915C62.9968 108.504 61.0901 110.279 61.6818 110.937C62.0763 111.397 62.9968 111.792 63.7858 111.857C67.8623 111.989 75.4892 117.709 81.0121 124.81C82.7873 127.045 90.2827 136.513 97.7124 145.85C109.81 161.038 111.585 162.945 114.741 164.523C122.434 168.402 131.245 165.575 134.598 158.145C137.293 152.293 135.715 146.639 129.141 138.354C126.511 135.067 121.842 129.149 118.752 125.204C107.509 110.871 97.8439 98.9048 96.3317 97.5241C92.7155 94.2366 86.798 93.1846 81.8668 94.9598Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-6 path-green"
                  pathLength="1"
                />
                <path
                  d="M57.4739 121.325C53.7262 122.246 50.2415 124.81 47.8745 128.36C45.376 132.174 45.0473 138.552 47.0855 142.891C49.7812 148.611 54.9097 151.899 61.2216 151.899C70.0977 151.899 76.8699 145.192 76.8699 136.448C76.9357 126.256 67.3363 118.761 57.4739 121.325Z"
                  fill="transparent"
                  strokeWidth="2"
                  className="path-draw delay-7 path-green"
                  pathLength="1"
                />
              </svg>
            </div>
          </div>
        </div>

        <div className="w-[250px] h-[150px] ">
          <svg
            width="250"
            height="150"
            viewBox="0 0 405 96"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M127.002 0.406796C116.069 2.73484 108.332 6.82655 100.665 14.5161C93.9921 21.1475 90.8687 25.9447 88.0292 33.7048C86.3964 38.2198 86.1835 39.913 86.1835 48.0258C86.1125 56.2092 86.3255 57.7613 88.0292 62.3468C90.7977 70.0364 93.9921 74.8336 100.31 81.1828C106.77 87.6025 112.662 91.3415 120.897 94.0223C125.866 95.6449 127.782 95.927 136.159 95.927C144.89 95.9976 146.239 95.786 151.492 94.0223C154.687 92.9641 159.088 90.9888 161.218 89.6484C166.045 86.8265 171.653 82.3115 171.653 81.3944C171.653 80.9711 168.884 77.8671 165.548 74.4103L159.443 68.2022L154.758 71.7295C142.761 80.7595 127.427 80.054 116.353 69.9659C109.184 63.3345 105.634 51.2004 108.048 41.0417C110.319 31.5179 115.572 24.7454 123.949 20.7242C128.421 18.5373 129.131 18.3962 136.514 18.3962C143.897 18.3962 144.606 18.5373 148.937 20.6537C151.492 21.853 154.829 24.0399 156.461 25.3803L159.372 27.8495L165.619 21.5708C169.026 18.114 171.653 14.8689 171.511 14.375C171.014 12.823 163.347 7.10873 159.088 4.99233C151.847 1.465 147.02 0.33625 138.289 0.0540627C133.816 -0.0870307 128.705 0.0540627 127.002 0.406796Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-0 path-blue"
              pathLength="1"
            />
            <path
              d="M36.492 3.36979C35.9241 4.28689 33.2265 10.5656 30.529 17.338C23.2882 35.0453 16.7573 50.9888 7.74188 72.6467C3.34063 83.0876 -0.137779 92.1175 0.00419632 92.7525C0.21716 93.7401 1.70791 93.8812 10.5814 94.0929C18.3191 94.2339 21.1586 94.0223 21.6555 93.3874C22.0814 92.8936 23.2882 90.0717 24.353 87.1793C25.4888 84.2869 28.8963 75.6802 32.0197 68.1317C35.0722 60.5832 39.6864 49.2957 42.242 43.0876C44.7976 36.8795 46.9272 31.7296 47.0692 31.5885C47.1402 31.4474 47.779 32.7172 48.3469 34.4103C48.9858 36.1035 50.9025 40.9006 52.7482 45.204C54.5939 49.4368 59.4211 61.3592 63.5384 71.659C67.6556 81.9588 71.489 91.2004 71.9859 92.2586L73.0507 94.2339H83.6279C89.4489 94.2339 94.3471 93.9518 94.5601 93.599C94.844 93.2463 93.8502 90.2833 92.4304 87.0382C91.0107 83.8636 87.5323 75.4685 84.6927 68.4844C81.8532 61.5003 76.7421 49.1546 73.3347 40.9712C69.9982 32.7878 65.313 21.3592 62.9704 15.5744C56.8655 0.477371 58.4272 1.81776 47.0692 1.81776C37.9117 1.81776 37.4858 1.88831 36.492 3.36979Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-1 path-blue"
              pathLength="1"
            />
            <path
              d="M177.403 2.80539C176.835 3.44031 176.693 16.1387 176.764 48.8018L176.977 93.8812L186.844 94.0928C192.878 94.1634 196.996 94.0223 197.563 93.5285C198.77 92.5408 199.125 4.28687 197.847 2.80539C196.712 1.39445 178.61 1.39445 177.403 2.80539Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-2 path-blue"
              pathLength="1"
            />
            <path
              d="M210.341 2.45266C209.702 3.58141 209.844 92.9641 210.554 93.6696C210.909 94.0223 215.594 94.1634 221.06 94.0928L230.928 93.8812L231.141 65.8036C231.212 49.9306 231.567 37.7966 231.922 37.9377C232.702 38.2198 239.233 46.9676 246.474 57.5496C253.786 68.1316 255.135 69.5426 257.903 69.5426C260.53 69.5426 261.311 68.7666 267.274 60.3715C273.166 52.047 295.101 21.7825 300.567 14.4456C305.749 7.46148 307.169 4.42797 305.82 2.87594C304.684 1.46501 288.925 1.32391 287.221 2.6643C286.653 3.15813 282.82 8.02585 278.845 13.4579C264.008 33.6343 258.613 40.6184 257.832 40.6184C257.193 40.6184 251.585 33.2816 235.613 11.4121C228.301 1.32391 229.082 1.81774 219.144 1.81774C214.53 1.81774 210.625 2.09993 210.341 2.45266Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-3 path-blue"
              pathLength="1"
            />
            <path
              d="M346.709 3.36974C345.857 4.78067 333.434 34.763 327.116 50.8477C326.052 53.5285 321.579 64.1105 317.249 74.3397C312.919 84.569 309.511 93.1757 309.724 93.5284C310.434 94.5866 331.021 94.4455 331.873 93.3168C332.511 92.6113 348.555 53.3874 355.015 36.8794C356.363 33.5637 357.428 31.7295 357.712 32.2939C358.28 33.3521 367.579 56.0681 376.737 78.7136L382.842 93.8812L393.419 94.0928C399.24 94.1634 404.28 94.0223 404.635 93.6695C405.203 93.1052 400.518 81.1828 390.65 57.9023C388.166 52.047 382.274 37.6554 377.447 25.8036C372.691 13.9517 368.289 3.72247 367.721 3.017C366.799 1.9588 365.308 1.81771 357.215 1.81771C348.129 1.81771 347.703 1.88825 346.709 3.36974Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-4 path-blue"
              pathLength="1"
            />
            <path
              d="M294.533 38.9958L284.524 52.9641V73.211C284.524 87.6731 284.737 93.599 285.304 93.9517C286.44 94.5866 305.323 94.3045 306.033 93.599C306.956 92.6819 306.317 25.592 305.394 25.3098C304.897 25.1687 300.07 31.3062 294.533 38.9958Z"
              fill="transparent"
              strokeWidth="2"
              className="path-draw delay-5 path-green"
              pathLength="1"
            />
          </svg>
        </div>
      </div>
    </div>
  );
}
